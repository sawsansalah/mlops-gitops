postgresql:
  auth:
    postgresPassword: "mlflow_password"
    username: "mlflow"
    password: "mlflow123"
    database: "mlflow"
    enablePostgresUser: true
  
  primary:
    persistence:
      enabled: true
      size: 10Gi
      storageClass: ""
    
    initdb:
      scripts:
        init.sql: |
          -- Connect to mlflow database
          \c mlflow
          
          -- Grant full permissions to mlflow user on public schema
          GRANT ALL ON SCHEMA public TO mlflow;
          GRANT CREATE ON SCHEMA public TO mlflow;
          ALTER SCHEMA public OWNER TO mlflow;
          ALTER DATABASE mlflow OWNER TO mlflow;
          
          -- Grant privileges on all current and future objects
          GRANT ALL PRIVILEGES ON ALL TABLES IN SCHEMA public TO mlflow;
          GRANT ALL PRIVILEGES ON ALL SEQUENCES IN SCHEMA public TO mlflow;
          ALTER DEFAULT PRIVILEGES IN SCHEMA public GRANT ALL ON TABLES TO mlflow;
          ALTER DEFAULT PRIVILEGES IN SCHEMA public GRANT ALL ON SEQUENCES TO mlflow;
  
  replication:
    enabled: false
  
  metrics:
    enabled: false
  
  service:
    type: ClusterIP
    ports:
      postgresql: 5432